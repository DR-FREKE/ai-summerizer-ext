// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" // for prod, this will be postgres
  url      = env("DATABASE_URL")
}

model Video {
  video_id          String             @id @unique
  video_name        String
  general_topic     String
  summary           String
  video_thumbnail   String
  video_url         String?
  category          String
  timestamp_summary TimestampSummary[]
  insights          Insight[]
  rating            Ratings[]
  transcript        Transcripts[]
  updated_at        DateTime           @updatedAt
  created_at        DateTime           @default(now())

  @@unique([video_name])
  @@index([video_id, video_name])
}

model Transcripts {
  id       Int                    @id @default(autoincrement())
  content  String
  metadata Json?
  video_id String
  vector   Unsupported("vector")?
  video    Video                  @relation(fields: [video_id], references: [video_id])
}

model TimestampSummary {
  id         String @id @default(cuid())
  icon       String
  key_ideas  String
  start_time Int
  tldr       String
  video_id   String
  video      Video  @relation(fields: [video_id], references: [video_id])

  @@index([video_id, start_time])
}

// model KeyIdeas {
//   id           Int              @id @default(autoincrement())
//   ideas        String?
//   timestamp_id String
//   timestamp    TimestampSummary @relation(fields: [timestamp_id], references: [id])
// }

model Insight {
  id       String         @id @default(cuid())
  name     String
  points   InsightPoint[]
  video_id String
  video    Video          @relation(fields: [video_id], references: [video_id])

  @@index([video_id])
}

model InsightPoint {
  id         String  @id @default(cuid())
  icon       String
  title      String
  insight_id String
  insight    Insight @relation(fields: [insight_id], references: [id])
}

// create model for rating
model Ratings {
  id         Int    @id @default(autoincrement())
  total_rate Int
  video_id   String
  video      Video  @relation(fields: [video_id], references: [video_id])
}

// create model for subscription and plan
